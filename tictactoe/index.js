"use strict";
var TILE_WIDTH = 60;
var SEP_WIDTH = 5;
var GAME_WIDTH = TILE_WIDTH * 3 + SEP_WIDTH * 2;
var GAME_HEIGHT = TILE_WIDTH * 3 + SEP_WIDTH * 2;
var canvas = document.getElementById('main');
canvas.width = GAME_WIDTH;
canvas.height = GAME_HEIGHT;
var scale = 1;
var offset = {
    x: 0,
    y: 0,
};
function resizeCanvas() {
    scale = Math.min(window.innerWidth / GAME_WIDTH, window.innerHeight / GAME_HEIGHT);
    canvas.style.transform = "scale(" + scale + ")";
    offset.x = (window.innerWidth - (GAME_WIDTH * scale)) / 2;
    offset.y = (window.innerHeight - (GAME_HEIGHT * scale)) / 2;
    canvas.style.left = offset.x + "px";
    canvas.style.top = offset.y + "px";
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);
var ctx = canvas.getContext('2d');
function drawLine(x1, y1, x2, y2, lineWidth, style) {
    ctx.lineWidth = lineWidth;
    ctx.strokeStyle = style;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.closePath();
    ctx.stroke();
}
function drawGrid() {
    ctx.fillStyle = 'rgba(0,255,255,1)';
    ctx.fillRect(0, TILE_WIDTH, GAME_WIDTH, SEP_WIDTH);
    ctx.fillRect(0, TILE_WIDTH * 2 + SEP_WIDTH, GAME_WIDTH, SEP_WIDTH);
    ctx.fillRect(TILE_WIDTH, 0, SEP_WIDTH, GAME_HEIGHT);
    ctx.fillRect(TILE_WIDTH * 2 + SEP_WIDTH, 0, SEP_WIDTH, GAME_HEIGHT);
}
drawGrid();
/**
 *  0: nothing
 *  1: X
 * -1: O
 */
var X = 1;
var O = -1;
var gameState = [
    [X, 0, 0],
    [O, 0, 0],
    [0, X, O],
];
function drawX(x, y) {
    var line1 = {
        start: {
            x: TILE_WIDTH * 0.1 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.1 + y * (TILE_WIDTH + SEP_WIDTH),
        },
        end: {
            x: TILE_WIDTH * 0.9 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.9 + y * (TILE_WIDTH + SEP_WIDTH),
        },
    };
    var line2 = {
        start: {
            x: TILE_WIDTH * 0.1 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.9 + y * (TILE_WIDTH + SEP_WIDTH),
        },
        end: {
            x: TILE_WIDTH * 0.9 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.1 + y * (TILE_WIDTH + SEP_WIDTH),
        },
    };
    var lineWidth = TILE_WIDTH * 0.1;
    var style = 'rgba(255,0,0,1)';
    drawLine(line1.start.x, line1.start.y, line1.end.x, line1.end.y, lineWidth, style);
    drawLine(line2.start.x, line2.start.y, line2.end.x, line2.end.y, lineWidth, style);
}
function drawO(x, y) {
    ctx.lineWidth = TILE_WIDTH * 0.1;
    ctx.strokeStyle = 'rgba(0,0,255,1)';
    var radius = TILE_WIDTH * 0.4;
    var origin = {
        x: TILE_WIDTH * 0.5 + x * (TILE_WIDTH + SEP_WIDTH),
        y: TILE_WIDTH * 0.5 + y * (TILE_WIDTH + SEP_WIDTH),
    };
    ctx.beginPath();
    ctx.arc(origin.x, origin.y, radius, 0, 2 * Math.PI);
    ctx.closePath();
    ctx.stroke();
}
function renderGameState() {
    for (var i = 0; i < gameState.length; i++) {
        for (var j = 0; j < gameState[i].length; j++) {
            if (gameState[i][j] === X) {
                drawX(j, i);
            }
            else if (gameState[i][j] === O) {
                drawO(j, i);
            }
        }
    }
}
renderGameState();
function drawTouchPoint(x, y) {
    ctx.fillStyle = 'rgba(255,0,0,0.5)';
    ctx.beginPath();
    ctx.arc((x - offset.x) / scale, (y - offset.y) / scale, 5, 0, 2 * Math.PI);
    ctx.closePath();
    ctx.fill();
}
function floatToInt(x) {
    return (x - (x % 1));
}
function mapTouchPosToTile(x, y) {
    var pos = {
        x: (x - offset.x) / scale,
        y: (y - offset.y) / scale,
    };
    var tilePos = {
        x: floatToInt(pos.x / (GAME_WIDTH / 3)),
        y: floatToInt(pos.y / (GAME_HEIGHT / 3)),
    };
    return tilePos;
}
function draw() {
    ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
    drawGrid();
    renderGameState();
}
var turn = X;
function touchUp(evt) {
    drawTouchPoint(evt.x, evt.y);
    var tilePos = mapTouchPosToTile(evt.x, evt.y);
    gameState[tilePos.y][tilePos.x] = turn;
    turn = -turn;
    draw();
}
canvas.addEventListener('mouseup', touchUp);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFBO0FBQ3JCLElBQU0sU0FBUyxHQUFHLENBQUMsQ0FBQTtBQUNuQixJQUFNLFVBQVUsR0FBRyxVQUFVLEdBQUcsQ0FBQyxHQUFHLFNBQVMsR0FBRyxDQUFDLENBQUE7QUFDakQsSUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLENBQUMsR0FBRyxTQUFTLEdBQUcsQ0FBQyxDQUFBO0FBRWxELElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFzQixDQUFBO0FBQ2pFLE1BQU0sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFBO0FBQ3pCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFBO0FBRTNCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQTtBQUNiLElBQUksTUFBTSxHQUFHO0lBQ1QsQ0FBQyxFQUFFLENBQUM7SUFDSixDQUFDLEVBQUUsQ0FBQztDQUNQLENBQUE7QUFFRCxTQUFTLFlBQVk7SUFDakIsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQ1osTUFBTSxDQUFDLFVBQVUsR0FBRyxVQUFVLEVBQzlCLE1BQU0sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUNuQyxDQUFBO0lBRUQsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsV0FBUyxLQUFLLE1BQUcsQ0FBQTtJQUMxQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN6RCxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUMzRCxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksR0FBTSxNQUFNLENBQUMsQ0FBQyxPQUFJLENBQUE7SUFDbkMsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQU0sTUFBTSxDQUFDLENBQUMsT0FBSSxDQUFBO0FBQ3RDLENBQUM7QUFFRCxZQUFZLEVBQUUsQ0FBQTtBQUNkLE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDLENBQUE7QUFFL0MsSUFBSSxHQUFHLEdBQUcsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQTZCLENBQUE7QUFFN0QsU0FBUyxRQUFRLENBQUMsRUFBVSxFQUFFLEVBQVUsRUFBRSxFQUFVLEVBQUUsRUFBVSxFQUFFLFNBQWlCLEVBQUUsS0FBYTtJQUM5RixHQUFHLENBQUMsU0FBUyxHQUFHLFNBQVMsQ0FBQTtJQUN6QixHQUFHLENBQUMsV0FBVyxHQUFHLEtBQUssQ0FBQTtJQUN2QixHQUFHLENBQUMsU0FBUyxFQUFFLENBQUE7SUFDZixHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUNsQixHQUFHLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUNsQixHQUFHLENBQUMsU0FBUyxFQUFFLENBQUE7SUFDZixHQUFHLENBQUMsTUFBTSxFQUFFLENBQUE7QUFDaEIsQ0FBQztBQUVELFNBQVMsUUFBUTtJQUNiLEdBQUcsQ0FBQyxTQUFTLEdBQUcsbUJBQW1CLENBQUE7SUFDbkMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLEVBQUUsVUFBVSxFQUFFLFVBQVUsRUFBRSxTQUFTLENBQUMsQ0FBQTtJQUNsRCxHQUFHLENBQUMsUUFBUSxDQUFDLENBQUMsRUFBRSxVQUFVLEdBQUcsQ0FBQyxHQUFHLFNBQVMsRUFBRSxVQUFVLEVBQUUsU0FBUyxDQUFDLENBQUE7SUFDbEUsR0FBRyxDQUFDLFFBQVEsQ0FBQyxVQUFVLEVBQUUsQ0FBQyxFQUFFLFNBQVMsRUFBRSxXQUFXLENBQUMsQ0FBQTtJQUNuRCxHQUFHLENBQUMsUUFBUSxDQUFDLFVBQVUsR0FBRyxDQUFDLEdBQUcsU0FBUyxFQUFFLENBQUMsRUFBRSxTQUFTLEVBQUUsV0FBVyxDQUFDLENBQUE7QUFDdkUsQ0FBQztBQUVELFFBQVEsRUFBRSxDQUFBO0FBRVY7Ozs7R0FJRztBQUNILElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQTtBQUNYLElBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFBO0FBQ1osSUFBSSxTQUFTLEdBQUc7SUFDWixDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO0lBQ1QsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztJQUNULENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Q0FDWixDQUFBO0FBRUQsU0FBUyxLQUFLLENBQUMsQ0FBUyxFQUFFLENBQVM7SUFDL0IsSUFBSSxLQUFLLEdBQUc7UUFDUixLQUFLLEVBQUU7WUFDSCxDQUFDLEVBQUUsVUFBVSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1lBQ2xELENBQUMsRUFBRSxVQUFVLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7U0FDckQ7UUFDRCxHQUFHLEVBQUU7WUFDRCxDQUFDLEVBQUUsVUFBVSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1lBQ2xELENBQUMsRUFBRSxVQUFVLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7U0FDckQ7S0FDSixDQUFBO0lBRUQsSUFBSSxLQUFLLEdBQUc7UUFDUixLQUFLLEVBQUU7WUFDSCxDQUFDLEVBQUUsVUFBVSxHQUFHLEdBQUcsR0FBRyxDQUFDLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1lBQ2xELENBQUMsRUFBRSxVQUFVLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLFVBQVUsR0FBRyxTQUFTLENBQUM7U0FDckQ7UUFDRCxH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