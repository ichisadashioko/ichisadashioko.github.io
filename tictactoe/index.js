"use strict";
var TILE_WIDTH = 60;
var SEP_WIDTH = 5;
var GAME_WIDTH = TILE_WIDTH * 3 + SEP_WIDTH * 2;
var GAME_HEIGHT = TILE_WIDTH * 3 + SEP_WIDTH * 2;
var canvas = document.getElementById('main');
canvas.width = GAME_WIDTH;
canvas.height = GAME_HEIGHT;
var scale = 1;
var offset = {
    x: 0,
    y: 0,
};
function resizeCanvas() {
    scale = Math.min(window.innerWidth / GAME_WIDTH, window.innerHeight / GAME_HEIGHT);
    canvas.style.transform = "scale(" + scale + ")";
    offset.x = (window.innerWidth - (GAME_WIDTH * scale)) / 2;
    offset.y = (window.innerHeight - (GAME_HEIGHT * scale)) / 2;
    canvas.style.left = offset.x + "px";
    canvas.style.top = offset.y + "px";
}
resizeCanvas();
window.addEventListener('resize', resizeCanvas);
var ctx = canvas.getContext('2d');
function drawLine(x1, y1, x2, y2, lineWidth, style) {
    ctx.lineWidth = lineWidth;
    ctx.strokeStyle = style;
    ctx.beginPath();
    ctx.moveTo(x1, y1);
    ctx.lineTo(x2, y2);
    ctx.closePath();
    ctx.stroke();
}
function drawGrid() {
    ctx.fillStyle = 'rgba(0,255,255,1)';
    ctx.fillRect(0, TILE_WIDTH, GAME_WIDTH, SEP_WIDTH);
    ctx.fillRect(0, TILE_WIDTH * 2 + SEP_WIDTH, GAME_WIDTH, SEP_WIDTH);
    ctx.fillRect(TILE_WIDTH, 0, SEP_WIDTH, GAME_HEIGHT);
    ctx.fillRect(TILE_WIDTH * 2 + SEP_WIDTH, 0, SEP_WIDTH, GAME_HEIGHT);
}
drawGrid();
/**
 *  0: nothing
 *  1: X
 * -1: O
 */
var X = 1;
var O = -1;
var turn = X;
var gameEnded;
var gameState;
function resetGameState() {
    turn = X;
    gameEnded = false;
    gameState = [
        [0, 0, 0],
        [0, 0, 0],
        [0, 0, 0],
    ];
}
resetGameState();
function drawX(x, y) {
    var line1 = {
        start: {
            x: TILE_WIDTH * 0.1 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.1 + y * (TILE_WIDTH + SEP_WIDTH),
        },
        end: {
            x: TILE_WIDTH * 0.9 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.9 + y * (TILE_WIDTH + SEP_WIDTH),
        },
    };
    var line2 = {
        start: {
            x: TILE_WIDTH * 0.1 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.9 + y * (TILE_WIDTH + SEP_WIDTH),
        },
        end: {
            x: TILE_WIDTH * 0.9 + x * (TILE_WIDTH + SEP_WIDTH),
            y: TILE_WIDTH * 0.1 + y * (TILE_WIDTH + SEP_WIDTH),
        },
    };
    var lineWidth = TILE_WIDTH * 0.1;
    var style = 'rgba(255,0,0,1)';
    drawLine(line1.start.x, line1.start.y, line1.end.x, line1.end.y, lineWidth, style);
    drawLine(line2.start.x, line2.start.y, line2.end.x, line2.end.y, lineWidth, style);
}
function drawO(x, y) {
    ctx.lineWidth = TILE_WIDTH * 0.1;
    ctx.strokeStyle = 'rgba(0,0,255,1)';
    var radius = TILE_WIDTH * 0.4;
    var origin = {
        x: TILE_WIDTH * 0.5 + x * (TILE_WIDTH + SEP_WIDTH),
        y: TILE_WIDTH * 0.5 + y * (TILE_WIDTH + SEP_WIDTH),
    };
    ctx.beginPath();
    ctx.arc(origin.x, origin.y, radius, 0, 2 * Math.PI);
    ctx.closePath();
    ctx.stroke();
}
function renderGameState() {
    for (var i = 0; i < gameState.length; i++) {
        for (var j = 0; j < gameState[i].length; j++) {
            if (gameState[i][j] === X) {
                drawX(j, i);
            }
            else if (gameState[i][j] === O) {
                drawO(j, i);
            }
        }
    }
}
renderGameState();
function drawTouchPoint(x, y) {
    ctx.fillStyle = 'rgba(255,0,0,0.5)';
    ctx.beginPath();
    ctx.arc((x - offset.x) / scale, (y - offset.y) / scale, 5, 0, 2 * Math.PI);
    ctx.closePath();
    ctx.fill();
}
function floatToInt(x) {
    return (x - (x % 1));
}
function mapTouchPosToTile(x, y) {
    var pos = {
        x: (x - offset.x) / scale,
        y: (y - offset.y) / scale,
    };
    var tilePos = {
        x: floatToInt(pos.x / (GAME_WIDTH / 3)),
        y: floatToInt(pos.y / (GAME_HEIGHT / 3)),
    };
    return tilePos;
}
function draw() {
    ctx.clearRect(0, 0, GAME_WIDTH, GAME_HEIGHT);
    drawGrid();
    renderGameState();
}
function findMatrixShape(x) {
    var numRows = x.length;
    var numColumns = x[0].length;
    return {
        rows: numRows,
        columns: numColumns,
    };
}
function multiply(a, b) {
    var aShape = findMatrixShape(a);
    var bShape = findMatrixShape(b);
    if (aShape.columns !== bShape.rows) {
        throw "Cannot perform matrix multipication on " + aShape.rows + "x" + aShape.columns + " and " + bShape.rows + "x" + bShape.columns + "!";
    }
    var resultMatrix = [];
    for (var i = 0; i < aShape.rows; i++) {
        resultMatrix[i] = [];
        for (var j = 0; j < bShape.columns; j++) {
            resultMatrix[i][j] = 0;
            for (var k = 0; k < aShape.columns; k++) {
                resultMatrix[i][j] += a[i][k] * b[k][j];
            }
        }
    }
    return resultMatrix;
}
function transpose(x) {
    var xShape = findMatrixShape(x);
    var resultMatrix = [];
    for (var i = 0; i < xShape.columns; i++) {
        resultMatrix[i] = [];
        for (var j = 0; j < xShape.rows; j++) {
            resultMatrix[i][j] = x[j][i];
        }
    }
    return resultMatrix;
}
function trace(x) {
    var xShape = findMatrixShape(x);
    if (xShape.rows !== xShape.columns) {
        throw "Cannot calculate trace for matrix with shape " + xShape.rows + "x" + xShape.columns;
    }
    var result = 0;
    for (var i = 0; i < xShape.rows; i++) {
        result += x[i][i];
    }
    return result;
}
var eMatrices = [
    [[1], [0], [0]],
    [[0], [1], [0]],
    [[0], [0], [1]],
];
var aMatrix = [[1, 1, 1]];
function whoIsTheWinner() {
    // https://math.stackexchange.com/questions/467757/determine-the-winner-of-a-tic-tac-toe-board-with-a-single-matrix-expression
    var results = [];
    for (var i = 0; i < eMatrices.length; i++) {
        var se = multiply(gameState, eMatrices[i]);
        var ase = multiply(aMatrix, se);
        results.push(ase[0][0]);
    }
    var sT = transpose(gameState);
    for (var i = 0; i < eMatrices.length; i++) {
        var se = multiply(sT, eMatrices[i]);
        var ase = multiply(aMatrix, se);
        results.push(ase[0][0]);
    }
    results.push(trace(gameState));
    // Permute (swap) rows
    var P = [
        [0, 0, 1],
        [0, 1, 0],
        [1, 0, 0],
    ];
    var Ps = multiply(P, gameState);
    results.push(trace(Ps));
    for (var i = 0; i < results.length; i++) {
        if (results[i] === 3) {
            // X wins
            gameEnded = true;
            break;
        }
        else if (results[i] === -3) {
            // O wins
            gameEnded = true;
            break;
        }
    }
    console.log(results);
}
function touchUp(evt) {
    drawTouchPoint(evt.x, evt.y);
    var tilePos = mapTouchPosToTile(evt.x, evt.y);
    if (gameEnded) {
        resetGameState();
    }
    if (gameState[tilePos.y][tilePos.x] === 0) {
        gameState[tilePos.y][tilePos.x] = turn;
        turn = -turn;
        draw();
        whoIsTheWinner();
    }
}
canvas.addEventListener('mouseup', touchUp);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiO0FBQUEsSUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFBO0FBQ3JCLElBQU0sU0FBUyxHQUFHLENBQUMsQ0FBQTtBQUNuQixJQUFNLFVBQVUsR0FBRyxVQUFVLEdBQUcsQ0FBQyxHQUFHLFNBQVMsR0FBRyxDQUFDLENBQUE7QUFDakQsSUFBTSxXQUFXLEdBQUcsVUFBVSxHQUFHLENBQUMsR0FBRyxTQUFTLEdBQUcsQ0FBQyxDQUFBO0FBRWxELElBQUksTUFBTSxHQUFHLFFBQVEsQ0FBQyxjQUFjLENBQUMsTUFBTSxDQUFzQixDQUFBO0FBQ2pFLE1BQU0sQ0FBQyxLQUFLLEdBQUcsVUFBVSxDQUFBO0FBQ3pCLE1BQU0sQ0FBQyxNQUFNLEdBQUcsV0FBVyxDQUFBO0FBRTNCLElBQUksS0FBSyxHQUFHLENBQUMsQ0FBQTtBQUNiLElBQUksTUFBTSxHQUFHO0lBQ1QsQ0FBQyxFQUFFLENBQUM7SUFDSixDQUFDLEVBQUUsQ0FBQztDQUNQLENBQUE7QUFFRCxTQUFTLFlBQVk7SUFDakIsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQ1osTUFBTSxDQUFDLFVBQVUsR0FBRyxVQUFVLEVBQzlCLE1BQU0sQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUNuQyxDQUFBO0lBRUQsTUFBTSxDQUFDLEtBQUssQ0FBQyxTQUFTLEdBQUcsV0FBUyxLQUFLLE1BQUcsQ0FBQTtJQUMxQyxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsR0FBRyxDQUFDLFVBQVUsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUN6RCxNQUFNLENBQUMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxDQUFDLFdBQVcsR0FBRyxLQUFLLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQTtJQUMzRCxNQUFNLENBQUMsS0FBSyxDQUFDLElB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